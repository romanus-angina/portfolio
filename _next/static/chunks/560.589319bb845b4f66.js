"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{7560:function(e,r,t){t.r(r);var o=t(5893),n=t(5379),i=t.n(n),a=t(7294),l=t(6038);r.default=()=>{let[e,r]=(0,a.useState)(!0),[n,c]=(0,a.useState)(null),[s,d]=(0,a.useState)("Initializing..."),[u,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),g=(0,a.useRef)({x:0,y:0,worldX:0,worldY:0}),x=(0,a.useRef)(!1),h=(0,a.useRef)(!1),b=(0,a.useRef)(null),w=(0,a.useRef)(null),y=(0,a.useRef)(null),k=(0,a.useRef)(null),v=(0,a.useRef)(null),M=(0,a.useRef)(null),z=(0,a.useRef)({x:-.2205,y:0,z:0}),D=(0,a.useRef)(1);(0,a.useEffect)(()=>{m(!0)},[]),(0,a.useEffect)(()=>{let e={current:!0};if(!u||!b.current)return;console.log("Initializing point cloud profile..."),d("Setting up Three.js...");let init=async()=>{try{let r=await t.e(737).then(t.bind(t,9477));if(!e.current)return;let o=new r.Scene;y.current=o,o.background=new r.Color(1973796);let n=new r.PerspectiveCamera(60,1,.1,1e3);k.current=n,n.position.z=30;let i=new r.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance"});w.current=i,i.setPixelRatio(window.devicePixelRatio),i.setSize(300,300),i.setClearColor(0,0),b.current.innerHTML="",b.current.appendChild(i.domElement),createSimpleGrid(r),b.current.addEventListener("mousemove",handleMouseMove),b.current.addEventListener("mouseenter",()=>{x.current=!0}),b.current.addEventListener("mouseleave",()=>{x.current=!1,resetAllParticles()}),b.current.addEventListener("click",explodePointCloud),animate(),loadProfileImage(r)}catch(e){console.error("Error initializing Three.js:",e),c("Initialization error: ".concat(e.message)),r(!1)}};return init(),()=>{if(e.current=!1,console.log("Cleaning up point cloud resources"),M.current&&cancelAnimationFrame(M.current),b.current&&(b.current.removeEventListener("mousemove",handleMouseMove),b.current.removeEventListener("mouseenter",()=>{x.current=!0}),b.current.removeEventListener("mouseleave",()=>{x.current=!1}),b.current.removeEventListener("click",explodePointCloud),w.current&&w.current.domElement))try{b.current.removeChild(w.current.domElement)}catch(e){console.log("Error removing renderer from DOM:",e)}try{v.current&&(v.current.children&&v.current.children.forEach(e=>{e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}),v.current.geometry&&v.current.geometry.dispose(),v.current.material&&v.current.material.dispose()),w.current&&w.current.dispose()}catch(e){console.error("Error during cleanup:",e)}}},[u]);let explodePointCloud=e=>{if(f||h.current||!v.current||!v.current.children||0===v.current.children.length){e.preventDefault(),e.stopPropagation();return}p(!0),h.current=!0,b.current&&(b.current.style.cursor="not-allowed");let r=v.current.children;l.p8.killTweensOf(r.map(e=>e.position)),r.forEach(e=>{if(!e||!e.userData||!e.position)return;e.userData.explosionOriginalX||(e.userData.explosionOriginalX=e.position.x,e.userData.explosionOriginalY=e.position.y,e.userData.explosionOriginalZ=e.position.z);let r={x:(2*Math.random()-1)*30,y:(2*Math.random()-1)*30,z:(2*Math.random()-1)*30};l.p8.to(e.position,{x:e.position.x+r.x,y:e.position.y+r.y,z:e.position.z+r.z,duration:1.5,ease:"power2.out"})}),setTimeout(()=>{let e=l.p8.timeline({onComplete:()=>{setTimeout(()=>{p(!1),h.current=!1,b.current&&(b.current.style.cursor="pointer")},500)}});r.forEach(r=>{r&&r.userData&&e.to(r.position,{x:r.userData.originalX,y:r.userData.originalY,z:r.userData.originalZ,duration:2,ease:"elastic.out(1, 0.3)",delay:Math.random()},0)})},2e3)},resetAllParticles=()=>{if(f||h.current||!v.current||!v.current.children)return;let e=v.current.children;for(let r=0;r<e.length;r++){let t=e[r];t&&t.userData&&t.position&&l.p8.to(t.position,{x:t.userData.originalX,y:t.userData.originalY,z:t.userData.originalZ,duration:.5,ease:"power2.out"})}},createSimpleGrid=e=>{try{let r=new e.Group;v.current=r;for(let t=0;t<10;t++){let o=(t+1)*1.5;for(let n=0;n<40;n++){let i=n/40*Math.PI*2,a=Math.cos(i)*o,l=Math.sin(i)*o,c=new e.BoxGeometry(.4,.4,.4),s=t/10,d=.5+n/40*.3,u=new e.MeshBasicMaterial({color:new e.Color().setHSL(s,.7,d)}),m=new e.Mesh(c,u);m.position.set(a,l,0),m.userData.originalX=a,m.userData.originalY=l,m.userData.originalZ=0,m.userData.columnIndex=Math.floor((a+15)/1.5),m.position.x+=30,r.add(m)}}y.current.add(r),r.rotation.x=-.2205,z.current.x=-.2205,animateByColumns(r.children),console.log("Created circular grid with",r.children.length,"cubes")}catch(e){console.error("Error creating grid:",e),c("Grid creation error: ".concat(e.message))}},animateByColumns=e=>{if(!e||0===e.length)return;let r=1/0,t=-1/0;e.forEach(e=>{e.userData&&void 0!==e.userData.columnIndex&&(r=Math.min(r,e.userData.columnIndex),t=Math.max(t,e.userData.columnIndex))});let o=t-r+1;console.log("Animating ".concat(o," columns"));for(let r=0;r<=o;r++){let o=t-r,n=.05*r,i=e.filter(e=>e.userData&&e.userData.columnIndex===o);l.p8.to(i.map(e=>e.position),{x:(e,r)=>i[e].userData.originalX,duration:.8,delay:n,ease:"power2.out",overwrite:!0})}},loadProfileImage=e=>{d("Loading profile image...");try{let t=new Image;t.crossOrigin="Anonymous",t.onload=()=>{d("Image loaded: ".concat(t.width,"x").concat(t.height));try{let o=document.createElement("canvas"),n=o.getContext("2d");if(!n){console.warn("Could not get 2D context for canvas"),r(!1);return}o.width=t.width,o.height=t.height,n.drawImage(t,0,0);let i=n.getImageData(0,0,o.width,o.height);createPointCloudFromImage(e,i,o.width,o.height),r(!1)}catch(e){console.error("Error processing image:",e),d("Using fallback grid (image processing failed)"),r(!1)}},t.onerror=()=>{console.error("Error loading profile image - file not found or inaccessible"),d("Using fallback grid (image not found)"),r(!1)},t.src="images/profile.jpg"}catch(e){console.error("Error setting up image load:",e),d("Using fallback grid (image setup failed)"),r(!1)}},createPointCloudFromImage=(e,r,t,o)=>{try{d("Creating image particles..."),v.current&&y.current.remove(v.current);let n=new e.Group;v.current=n;let i=t/2,a=o/2,l=Math.min(t,o)/2,c=new e.SphereGeometry(.15,4,4),s=0,u={};for(let d=0;d<l;d+=2.5){let l=Math.floor(2*Math.PI*d/5);if(!(l<8))for(let m=0;m<l&&!(s>=1e4);m++){let f=m/l*Math.PI*2,p=Math.floor(i+d*Math.cos(f)),g=Math.floor(a+d*Math.sin(f));if(p>=0&&p<t&&g>=0&&g<o){let o=(g*t+p)*4,i=r.data[o]/255,a=r.data[o+1]/255,l=r.data[o+2]/255,m=r.data[o+3]/255,x=(i+a+l)/3;if(m<.5||x<.1)continue;let h=d*Math.cos(f)/15,b=-(d*Math.sin(f))/15,w=5*x,y=new e.MeshBasicMaterial({color:new e.Color(i,a,l)}),k=new e.Mesh(c,y);k.position.set(h,b,w),k.userData.originalX=h,k.userData.originalY=b,k.userData.originalZ=w;let v=Math.floor((h+15)/1.5);k.userData.columnIndex=v,k.position.x+=30,u[v]||(u[v]=[]),u[v].push(k),n.add(k),s++}}}y.current.add(n),n.rotation.x=-.2205,z.current.x=-.2205,animateByColumns(n.children),console.log("Created circular image point cloud with ".concat(s," particles in ").concat(Object.keys(u).length," columns")),d("Rendering point cloud")}catch(e){console.error("Error creating point cloud from image:",e),d("Using fallback grid (point cloud creation failed)")}},handleMouseMove=e=>{if(b.current)try{let r=b.current.getBoundingClientRect(),t=(e.clientX-r.left)/r.width*2-1,o=-(2*((e.clientY-r.top)/r.height))+1;g.current={x:t,y:o,worldX:15*t,worldY:15*o}}catch(e){console.error("Mouse movement error:",e)}},animate=()=>{if(w.current&&y.current&&k.current)try{if(M.current=requestAnimationFrame(animate),v.current&&v.current.children&&!f&&!h.current){let e=v.current.children;if(x.current){let r=g.current.worldX,t=g.current.worldY;for(let o=0;o<e.length;o++){let n=e[o];if(!n||!n.userData||!n.position)continue;let i=n.userData.originalX,a=n.userData.originalY,l=i-r,c=a-t,s=Math.sqrt(l*l+c*c);if(s<.375){let e=1-s/.375,r=Math.atan2(c,l),t=2.5*Math.cos(r)*e,o=2.5*Math.sin(r)*e;n.position.x=i+t,n.position.y=a+o}else{let e=n.position.x,r=n.position.y;(Math.abs(e-i)>.05||Math.abs(r-a)>.05)&&(n.position.x+=(i-e)*.2,n.position.y+=(a-r)*.2)}}}else for(let r=0;r<e.length;r++){let t=e[r];if(!t||!t.userData||!t.position)continue;let o=t.userData.originalX,n=t.userData.originalY,i=t.position.x,a=t.position.y;(Math.abs(i-o)>.01||Math.abs(a-n)>.01)&&(t.position.x+=(o-i)*.1,t.position.y+=(n-a)*.1)}}v.current&&(z.current.y+=7e-4*D.current,z.current.y>=.49?D.current=-1:z.current.y<=-.49&&(D.current=1),v.current.rotation.y=z.current.y),w.current.render(y.current,k.current)}catch(e){console.error("Animation error:",e),cancelAnimationFrame(M.current)}};return(0,o.jsxs)("div",{className:"jsx-33f718dc889e814c point-cloud-wrapper",children:[e&&(0,o.jsxs)("div",{className:"jsx-33f718dc889e814c loading-container",children:[(0,o.jsx)("div",{className:"jsx-33f718dc889e814c loading-spinner"}),(0,o.jsx)("div",{className:"jsx-33f718dc889e814c loading-indicator",children:s})]}),n&&(0,o.jsxs)("div",{className:"jsx-33f718dc889e814c error-message",children:[(0,o.jsx)("span",{className:"jsx-33f718dc889e814c error-icon",children:"⚠️"})," ",n]}),(0,o.jsx)("div",{className:"jsx-33f718dc889e814c profile-container",children:(0,o.jsx)("div",{ref:b,style:{width:"300px",height:"300px",margin:"0 auto",borderRadius:"50%",overflow:"hidden",position:"relative",background:"rgba(30, 30, 36, 0.5)",zIndex:1,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",transition:"opacity 0.5s ease, transform 0.5s ease",cursor:f||h.current?"not-allowed":"pointer"},className:"jsx-33f718dc889e814c "+"point-cloud-container ".concat(e?"loading":""," ").concat(f?"exploding":"")})}),(0,o.jsx)(i(),{id:"33f718dc889e814c",children:'.point-cloud-wrapper.jsx-33f718dc889e814c{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin:2rem 0}.profile-container.jsx-33f718dc889e814c{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.loading-container.jsx-33f718dc889e814c{position:absolute;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10;background-color:rgba(30,30,36,.7);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.loading-spinner.jsx-33f718dc889e814c{width:40px;height:40px;border:3px solid rgba(255,255,255,.1);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border-top-color:#fff;-webkit-animation:spin 1s ease-in-out infinite;-moz-animation:spin 1s ease-in-out infinite;-o-animation:spin 1s ease-in-out infinite;animation:spin 1s ease-in-out infinite;margin-bottom:1rem}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.loading-indicator.jsx-33f718dc889e814c{color:#fff;font-family:"SF Mono","Fira Code",monospace;font-size:.85rem}.error-message.jsx-33f718dc889e814c{color:#ff6b6b;font-family:"SF Mono","Fira Code",monospace;font-size:.85rem;margin-bottom:1rem;padding:.75rem 1rem;background-color:rgba(255,107,107,.1);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.error-icon.jsx-33f718dc889e814c{margin-right:.5rem}.point-cloud-container.jsx-33f718dc889e814c{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.point-cloud-container.loading.jsx-33f718dc889e814c{opacity:.5;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-ms-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}.point-cloud-container.exploding.jsx-33f718dc889e814c{pointer-events:none}.profile-caption.jsx-33f718dc889e814c{font-family:"SF Mono","Fira Code",monospace;font-size:.85rem;color:#b3b3b3;margin-top:1.25rem;text-align:center;letter-spacing:.5px}.interaction-hint.jsx-33f718dc889e814c{font-size:.75rem;opacity:.7;margin-top:.5rem}.caption-highlight.jsx-33f718dc889e814c{color:#fff;margin:0 .25rem}@media(max-width:768px){.point-cloud-container.jsx-33f718dc889e814c{width:250px!important;height:250px!important}}'})]})}}}]);